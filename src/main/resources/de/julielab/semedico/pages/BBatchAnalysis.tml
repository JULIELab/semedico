<html xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
	xmlns:p="tapestry:parameter">
	<head>
		<title>BTerm Batch Analysis</title>
	</head>
	<body>
		<div id="columnsContainer">

			<div id="leftColumn">
				<div id="logoContainer">
					<t:pagelink page="Index">
						<img border="0" src="${context:images/logo_small.png}" width="250"
							height="66" id="logo" />
					</t:pagelink>
				</div>
			</div>

			<div id="rightColumn">
				<form t:type="form" t:id="termform">

					<t:errors />

					<t:label for="numPairs" />
					:
					<t:select t:id="numPairs" t:model="literal:1,2,3,4,5,6,7,8,9"
						t:zone="termPairsZone" value="bBatchEntity.numPairs" />
					<t:label for="numTop" />
					<input t:type="TextField" t:id="numTop" value="bBatchEntity.numTopTerms"
						size="2" class="termInput"/>
					<t:label for="filterNonTerms" />
					:
					<input t:type="CheckBox" t:id="filterNonTerms" value="bBatchEntity.filterNonTerms" />
					<br />
					<t:zone t:id="termPairsZone" id="termPairsZone">
						<t:loop t:source="bBatchEntity.termPairs" t:value="loopItemPair"
							t:index="termPairIndex" t:formstate="ITERATION">
							<t:label for="term1" />
							:
							<input t:type="TextField" t:id="term1" value="loopItemPair.term1"
								size="15" class="termInput,toleft" />
							<t:label for="term2" />
							:
							<input t:type="TextField" t:id="term2" value="loopItemPair.term2"
								size="15" class="termInput,toright" />
							<t:if test="bTermNumber">(${bTermNumber} term links found)</t:if>
							<br />
						</t:loop>
					</t:zone>
					<input t:type="submit" value="Start analysis" />
					<br />
					<textarea t:type="TextArea" t:value="topBTermLabels"
						t:translate="prop:fieldTranslatorForTextArea" rows="35" cols="45"
						readonly="readonly">
						<!-- Only renew the content, not the whole TextArea component; this 
							would cause an error saying the text area must be inside a form. There seem 
							to be ways to come around this error, but I don't exactly understand how. 
							Why exactly the input fields work with the zone I don't know either, but 
							probably because Tapestry takes care of things through the zone parameter 
							of the select component where we must do things manually for the CheckBox 
							component (the contents of the TextArea are changed when the CheckBox is 
							checked or unchecked). -->
						<t:zone t:id="textAreaZone" id="textAreaZone">
							${textAreaContent}
						</t:zone>
					</textarea>
				</form>
				<form t:type="form" t:id="saveform">
					<input t:type="submit" value="prop:saveformlabel" />
					<t:if test="bBatchEntity.id">
						<br />
						Storage ID of this result: ${bBatchEntity.id}
					</t:if>
				</form>
				<form t:type="form" t:id="newAnalysisForm">
					<input t:type="submit" value="Reset fields and start new analysis" />
				</form>
				<form t:type="form" t:id="loadform">

					<t:errors />

					<t:label for="loadResultId" />
					:
					<input t:type="TextField" t:id="loadResultId" value="loadResultId"
						size="4" />
					<br />
					<input t:type="submit" value="Load result with above ID" />
				</form>
			</div>
		</div>
	</body>
</html>